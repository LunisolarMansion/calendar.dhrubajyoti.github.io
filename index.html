<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Activity Calendar 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="evo-calendar.min.css">
<link rel="stylesheet" href="evo-calendar.midnight-blue.min.css">
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="hero">

  <!-- CALENDAR -->
  <div id="calendar"></div>

  <!-- QUOTE -->
  <div id="monthly-quote">
    <p id="quote-text"></p>
  </div>

  <!-- PANELS -->
  <div id="monthly-events">
    <div class="monthly-grid">

      <!-- IMPORTANT TASKS -->
      <div class="monthly-right collapsible">
        <h4 class="collapsible-header sticky-header">
          Important Tasks / Milestones
        </h4>
        <div class="collapsible-body">
          <ul id="task-list"></ul>
        </div>
      </div>

      <!-- KEY DATES -->
      <div class="monthly-left collapsible">
        <h4 class="collapsible-header">
          Month's Key Dates to Help You Plan the Month
        </h4>
        <div class="collapsible-body">
          <ul id="event-list"></ul>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

<!-- EXTERNAL DATA FILES -->
<script src="calendar-events.js"></script>
<script src="evo-calendar.min.js"></script>

<script>
$(document).ready(function () {

  /* ================= EVENTS ================= */
  const calendarEvents = window.calendarEvents || [];

  /* ===== COLOR NORMALIZATION ===== */
  calendarEvents.forEach(ev => {
    const d = (ev.description || "").toLowerCase();

    if (d.includes("sunday") || d.includes("2nd saturday") || d.includes("4th saturday"))
      ev.color = "#3fa9f5";       // Blue
    else if (ev.type === "Restricted Holiday")
      ev.color = "#ffd700";       // Yellow
    else if (d.includes("matri pitri"))
      ev.color = "#32cd32";       // Green
    else if (ev.type === "Holiday")
      ev.color = "#ff8c00";       // Orange
    else
      ev.color = "#ffffff";
  });

  /* ================= INIT CALENDAR ================= */
  $('#calendar').evoCalendar({
    theme: 'midnight-blue',
    calendarEvents: calendarEvents
  });

  /* ================= QUOTES ================= */
  const monthQuotes = [
    "The beginning of the year is the perfect time to set your goals high and work tirelessly toward them.",
    "A workplace isn't just a space to work; it's a space to grow.",
    "Teamwork transforms effort into excellence.",
    "Collaboration unlocks creative potential.",
    "Consistency is the bridge between goals and achievement.",
    "A positive workplace is the foundation of success.",
    "Teamwork fuels extraordinary outcomes.",
    "Great achievements are built together.",
    "Hard work turns dreams into reality.",
    "Every challenge is an opportunity to grow.",
    "Motivation multiplies when shared.",
    "Finish strong, together."
  ];

  /* ================= TASKS ================= */
  let taskData = [];

  fetch('tasks.json')
    .then(r => r.json())
    .then(data => {
      taskData = data;
      syncPanels(getActiveMonth());
    });

  /* ================= HELPERS ================= */
  function getActiveMonth() {
    const active = $('.calendar-active').data('date-val');
    return active ? new Date(active).getMonth() : new Date().getMonth();
  }

  function fmt(d){
    return `${String(d.getDate()).padStart(2,'0')}/${String(d.getMonth()+1).padStart(2,'0')}/${d.getFullYear()}`;
  }

  /* ================= KEY DATES ================= */
function populateMonthlyEvents(month) {
    const list = $('#event-list');
    list.empty();

    const TARGET_YEAR = 2026;

    const events = calendarEvents
        .filter(e => {
            const d = new Date(e.date);
            return d.getFullYear() === TARGET_YEAR && d.getMonth() === month;
        })
        .sort((a, b) => new Date(a.date) - new Date(b.date));

    if (!events.length) {
        list.append('<li style="color:#888;">No key dates for this month.</li>');
        return;
    }

    events.forEach(ev => {
        const d = new Date(ev.date);
        const dt =
            `${String(d.getDate()).padStart(2,'0')}/` +
            `${String(d.getMonth()+1).padStart(2,'0')}/${d.getFullYear()}`;

        list.append(`
            <li>
                <span style="color:#ffffff;">${dt} – </span>
                <span style="color:${ev.color};">
                    ${ev.description}
                </span>
            </li>
        `);
    });
}


  /* ================= TASK PANEL ================= */
  function populateMonthlyTasks(month) {
    const list = $('#task-list');
    list.empty();

    const today = new Date();
    today.setHours(0,0,0,0);

    taskData.forEach(t => {
      const s = new Date(t.start);
      const e = new Date(t.end);

      if (s.getMonth() === month || e.getMonth() === month) {
        const diff = Math.ceil((e - today)/(1000*60*60*24));
        const cd = diff < 0 ? "OVERDUE" : diff === 0 ? "D-DAY" : `D-${diff}`;

        list.append(`
          <li>
            <span class="task-period">${fmt(s)} – ${fmt(e)}</span>
            <span class="task-countdown ${diff<0?'overdue':''}">${cd}</span><br>
            <span class="task-text">${t.description}</span>
          </li>
        `);
      }
    });
  }

  /* ================= SYNC ALL ================= */
  function syncPanels(month) {
    $('#quote-text').text(monthQuotes[month]);
    populateMonthlyEvents(month);
    populateMonthlyTasks(month);
  }

  /* ================= EVENTS ================= */
  $('#calendar').on('selectDate', function () {
    syncPanels(getActiveMonth());
  });

  $('.collapsible-header').on('click', function(){
    $(this).next('.collapsible-body').slideToggle();
  });

  /* ================= INIT ================= */
  syncPanels(new Date().getMonth());

});
</script>

</body>
</html>
