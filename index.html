<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Activity Calendar 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="evo-calendar.min.css">
<link rel="stylesheet" href="evo-calendar.midnight-blue.min.css">
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="hero">

  <!-- MOBILE MONTH SELECTOR -->
  <div class="mobile-month-selector">
    <select id="monthSelect"></select>
  </div>

  <div class="content-flow">

    <!-- CALENDAR -->
    <div id="calendar"></div>

    <!-- QUOTE -->
    <div id="monthly-quote">
      <p id="quote-text"></p>
    </div>

    <!-- PANELS -->
    <div id="monthly-events">
      <div class="monthly-grid">

        <!-- IMPORTANT TASKS -->
        <div class="monthly-right collapsible collapsed">
          <h4 class="collapsible-header sticky-header">
            Important Tasks / Milestones
          </h4>
          <div class="collapsible-body">
            <ul id="task-list"></ul>
          </div>
        </div>

        <!-- KEY DATES -->
        <div class="monthly-left collapsible open">
          <h4 class="collapsible-header">
            Month's Key Dates to Help You Plan the Month
          </h4>
          <div class="collapsible-body">
            <ul id="event-list"></ul>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="evo-calendar.min.js"></script>

<script>
$(document).ready(function () {

  /* ================= MONTH SELECTOR ================= */
  const months = [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ];

  months.forEach((m,i)=>{
    $('#monthSelect').append(`<option value="${i}">${m}</option>`);
  });

  /* ================= EVENTS ================= */
  const calendarEvents = window.calendarEvents || []; // keep your full list as-is

  /* ================= NORMALISE COLOURS ================= */
  calendarEvents.forEach(ev=>{
    const d=(ev.description||"").toLowerCase();
    if(d.includes("sunday")||d.includes("2nd saturday")||d.includes("4th saturday"))
      ev.color="#3fa9f5";
    else if(ev.type==="Restricted Holiday")
      ev.color="#ffd700";
    else if(d.includes("matri pitri"))
      ev.color="#32cd32";
    else if(ev.type==="Holiday")
      ev.color="#ff8c00";
  });

  /* ================= CALENDAR INIT ================= */
  $('#calendar').evoCalendar({
    theme:'midnight-blue',
    calendarEvents: calendarEvents
  });

  /* ================= QUOTES ================= */
  const monthQuotes = [
    "The beginning of the year is the perfect time to set your goals high and work tirelessly toward them.",
    "A workplace isn't just a space to work; it's a space to grow.",
    "Teamwork transforms effort into excellence.",
    "Collaboration unlocks creative potential.",
    "Consistency is the bridge between goals and achievement.",
    "A positive workplace is the foundation of success.",
    "Teamwork fuels extraordinary outcomes.",
    "Great achievements are built together.",
    "Hard work turns dreams into reality.",
    "Every challenge is an opportunity to grow.",
    "Motivation multiplies when shared.",
    "Finish strong, together."
  ];

  function setQuote(m){
    $('#quote-text').text(monthQuotes[m]);
  }

  /* ================= KEY DATES ================= */
  function populateMonthlyEvents(month){
    const list=$('#event-list').empty();

    const evs = calendarEvents
      .filter(e => new Date(e.date).getMonth() === month)
      .sort((a,b)=>new Date(a.date)-new Date(b.date));

    if(!evs.length){
      list.append('<li style="color:white">No important dates this month.</li>');
      return;
    }

    evs.forEach(ev=>{
      const d=new Date(ev.date);
      const dt=`${String(d.getDate()).padStart(2,'0')}/${String(d.getMonth()+1).padStart(2,'0')}/${d.getFullYear()}`;

      list.append(`
        <li>
          <span class="date-text">${dt} - </span>
          <span style="color:${ev.color};font-weight:600">${ev.description}</span>
        </li>
      `);
    });
  }

  /* ================= TASKS ================= */
  let taskData=[];

  fetch('tasks.json')
    .then(r=>r.json())
    .then(data=>{
      taskData=data;
      populateMonthlyTasks(currentMonth);
    });

  function populateMonthlyTasks(month){
    const list=$('#task-list').empty();
    const today=new Date(); today.setHours(0,0,0,0);

    taskData.forEach(t=>{
      const s=new Date(t.start);
      const e=new Date(t.end);

      if(s.getMonth()===month || e.getMonth()===month){
        const diff=Math.ceil((e-today)/(1000*60*60*24));
        const cd=diff<0?'OVERDUE':diff===0?'D-DAY':`D-${diff}`;

        list.append(`
          <li>
            <span class="task-period">${fmt(s)} â€“ ${fmt(e)}</span>
            <span class="task-chip">${t.badge||'TASK'}</span>
            <span class="task-countdown ${diff<0?'overdue':''}">${cd}</span><br>
            <span class="task-text">${t.description}</span>
          </li>
        `);
      }
    });
  }

  function fmt(d){
    return `${String(d.getDate()).padStart(2,'0')}/${String(d.getMonth()+1).padStart(2,'0')}/${d.getFullYear()}`;
  }

  /* ================= SYNC ALL ON MONTH CHANGE ================= */
  function syncAll(month){
    $('#monthSelect').val(month);
    setQuote(month);
    populateMonthlyEvents(month);
    populateMonthlyTasks(month);
  }

  $('#calendar').on('selectMonth', (e,m)=>syncAll(m));
  $('#calendar').on('selectYear', (e,y)=>syncAll($('#calendar').evoCalendar('getActiveMonth')));

  $('#monthSelect').on('change', function(){
    syncAll(Number(this.value));
  });

  $('.collapsible-header').on('click',function(){
    $(this).next('.collapsible-body').slideToggle();
    $(this).parent().toggleClass('collapsed');
  });

  /* ================= INIT ================= */
  const currentMonth=new Date().getMonth();
  syncAll(currentMonth);

});
</script>

</body>
</html>
